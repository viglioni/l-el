# -*- eval: (add-hook 'before-save-hook 'org-make-toc nil t) -*-
#+title: l.el - Modern Functional Programming Utilities for Emacs Lisp
#+options: toc:t
#+startup: show2levels
  
* Table of Contents
:PROPERTIES:
:TOC:      :include all :depth 3
:END:
:CONTENTS:
- [[#table-of-contents][Table of Contents]]
- [[#overview][Overview]]
  - [[#features][Features]]
  - [[#usage][Usage]]
  - [[#configuration][Configuration]]
- [[#api-reference][API Reference]]
- [[#license][License]]
- [[#author][Author]]
- [[#url][URL]]
- [[#development][Development]]
  - [[#running-the-tests][Running the tests]]
  - [[#contribution-to-this-project][Contribution to this project]]
:END:

* Overview

Check the [[https://github.com/viglioni/l-el/tree/latest-release][latest release]] code.

=l.el= provides a comprehensive modern functional programming approach to writing Emacs Lisp, drawing inspiration from Common Lisp, Haskell, and Elixir. This library transforms Emacs Lisp into a more expressive functional programming language with advanced features including automatic currying, sophisticated pattern matching, type systems, syntax transformations, and specialized development tools.

** Supported Emacs Versions

| Emacs Version | Linux | macOS Intel | macOS ARM64 |
|---------------+-------+-------------+-------------|
| 26.3          | ✅     | ✅           | N/A         |
| 27.2          | ✅     | ✅           | N/A         |
| 28.2          | ✅     | ✅           | ✅           |
| 29.4          | ✅     | ✅           | ✅           |
| 30.1          | ✅     | ✅           | ✅           |

All versions are tested on every push via [[https://github.com/viglioni/l-el/actions][GitHub Actions CI]].

_{This lib is currently written on macOS M4 Max with Emacs 29.4, only QAed in this setup.}_


#+begin_src elisp :exports both :results output
  ;; -*- l-syntax: t; -*-

  @doc "A function that returns the nth Fibonacci number.
  This function grows exponentially and demonstrates direct value matching."
  (ldef fib 0 -> 0)
  (ldef fib 1 -> 1)
  (ldef fib (n :integer) ->
        (+ (fib (- n 1))
           (fib (- n 2))))

  @doc "This function calculates delta in a quadratic function
  and demonstrates automatic currying capabilities."
  (ldef delta (a :number) (b :number) (c :number) ->
        (- (* b b) (* 4 a c)))

  ;; Multiple calling styles with automatic currying:
  ((((delta) 1) 2) 3)  ;; Chained partial application
  (delta 1 2 3)        ;; Direct application
  (funcall (delta 1 2) 3) ;; Partial with funcall

  @doc "Sum function with rest parameters for variadic arguments."
  (ldef sum (nums :rest) -> (apply '+ nums))
  (sum 1 2 3 4 5)      ;; => 15

  @doc "Greeting function with direct value matching."
  (ldef greet "Alice" -> "Hello, Alice!")
  (ldef greet (name :string) -> (concat "Hi, " name "!"))
  (greet "Alice")      ;; => "Hello, Alice!"
  (greet "Bob")        ;; => "Hi, Bob!"
#+end_src

** Features

- **Automatic currying** with =ldef= - functions automatically curry when called with fewer arguments
- **Advanced pattern matching** with =ldef= - supports value matching, type matching, and rest parameters
- **Comprehensive type system** - extensive type predicates for robust pattern matching
- **Partial application** with =lpartial= - create partially applied functions
- **Placeholder substitution** with =__= - elegant placeholder-based expressions
- **Lambda syntax** with =l= - arrow notation for concise function definitions
- **Syntax transformation** with =with-l= and =l-syntax= - enable natural curried function call syntax
- **Documentation system** with =@doc= - Elixir-style documentation annotations
- **Enhanced major mode** with =l-mode= - specialized syntax highlighting and development tools
- **Function composition** with =lcomp= - compose functions for elegant data transformation
- **Specialized loading** with =l-require= - enhanced library loading with automatic l-syntax processing
- **Generic function management** - comprehensive tools for function lifecycle management

Check [[./changelog.org][changelog]] for more information.

** Usage

This package is not on MELPA/ELPA (yet?), but you can install via =use-package/straight=:

#+begin_src elisp
  (use-package l
    ;; clones latest release
    :straight (l :type git :host github :repo "viglioni/l-el" :branch "latest-release")
    :mode ("\\.el\\'" . l-mode) ;; Enhanced syntax highlighting
    :custom
    (l-syntax t) ;; Optional: globally enable l-syntax transformations
    :config
    (l-syntax-advices) ;; Enable automatic syntax transformation
    ;; ...
    )
#+end_src

Or clone this repository, add =l.el= to your load path and require it:

#+begin_src emacs-lisp
(require 'l)
#+end_src

** Configuration

The =l-syntax= variable controls syntax transformation behavior and can be configured in multiple ways:

***Global Configuration:***
#+begin_src emacs-lisp
(setq l-syntax t)
(l-syntax-advices)  ; Enable automatic transformation for evaluation functions
#+end_src

***File-local Configuration (Property Line):***
#+begin_src emacs-lisp
;; -*- l-syntax: t; -*-
#+end_src

***File-local Configuration (Local Variables):***
#+begin_src emacs-lisp
;; Local Variables:
;; l-syntax: t
;; End:
#+end_src

When enabled, =l-syntax= automatically wraps expressions in =with-l= during =eval-last-sexp=, =eval-region=, =eval-buffer=, =load-file=, and =load= operations, enabling natural curried function syntax without explicit =with-l= wrapping.
* API Reference

See [[./docs/api.org][API Reference]] for the complete documentation of all functions, macros, and variables.

* License

This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

* Author

Laura Viglioni

* URL

https://github.com/viglioni/l-el

* Development

** Running the tests

You need to have [[https://github.com/cask/cask][cask]] installed to run the tests.

#+begin_src shell :exports both :results output 
  make deps
  make test
#+end_src


** Contribution to this project

- Before opening a PR, open an issue first and let's discuss there the possible solutions.
